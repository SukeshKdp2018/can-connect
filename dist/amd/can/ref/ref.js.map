{"version":3,"sources":["../../../../../can/ref/ref.js"],"names":["connect","require","getIdProps","WeakReferenceMap","Observation","constructorStore","define","makeRef","connection","idProp","Ref","id","value","storeRef","store","get","_value","Map","hydrateInstance","requests","count","_requestInstances","addReference","type","ref","defs","promise","Promise","resolve","props","_state","lastSet","then","reason","undefined","catch","set","prototype","unobservedId","ignore","isResolved","isRejected","isPending","serialize","baseEventSetup","_eventSetup","apply","arguments","baseTeardown","_eventTeardown","deleteReference","on","module","exports","behavior","baseConnection","init"],"mappings":"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","file":"ref.js"}